!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).CallApp=e()}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var v=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),y=e(function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),b=(y.version,function(r,i,t){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}),i=function(t){return"object"==typeof t?null!==t:"function"==typeof t},r=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t},n=function(t){try{return!!t()}catch(t){return!0}},o=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),u=v.document,c=i(u)&&i(u.createElement),a=!o&&!n(function(){return 7!=Object.defineProperty((t="div",c?u.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),s=Object.defineProperty,f={f:o?Object.defineProperty:function(t,e,n){if(r(t),e=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),r(n),a)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},m=o?function(t,e,n){return f.f(t,e,{enumerable:!((r=1)&r),configurable:!(2&r),writable:!(4&r),value:n});var r}:function(t,e,n){return t[e]=n,t},l={}.hasOwnProperty,w=function(t,e){return l.call(t,e)},g="prototype",O=function(t,e,n){var r,i,o,u=t&O.F,c=t&O.G,a=t&O.S,s=t&O.P,f=t&O.B,l=t&O.W,d=c?y:y[e]||(y[e]={}),p=d[g],h=c?v:a?v[e]:(v[e]||{})[g];for(r in c&&(n=e),n)(i=!u&&h&&void 0!==h[r])&&w(d,r)||(o=i?h[r]:n[r],d[r]=c&&"function"!=typeof h[r]?n[r]:f&&i?b(o,v):l&&h[r]==o?function(r){var t=function(t,e,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(t);case 2:return new r(t,e)}return new r(t,e,n)}return r.apply(this,arguments)};return t[g]=r[g],t}(o):s&&"function"==typeof o?b(Function.call,o):o,s&&((d.virtual||(d.virtual={}))[r]=o,t&O.R&&p&&!p[r]&&m(p,r,o)))};O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128;var d,p,h,_=O,j={}.toString,S=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==(e=t,j.call(e).slice(8,-1))?t.split(""):Object(t);var e},k=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},E=function(t){return S(k(t))},M=Math.ceil,P=Math.floor,x=function(t){return isNaN(t=+t)?0:(0<t?P:M)(t)},C=Math.min,Q=Math.max,T=Math.min,U=e(function(t){var e="__core-js_shared__",n=v[e]||(v[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:y.version,mode:"pure",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})}),A=0,I=Math.random(),W=U("keys"),q=(d=!1,function(t,e,n){var r,i,o,u,c=E(t),a=0<(r=c.length)?C(x(r),9007199254740991):0,s=(o=a,(i=x(i=n))<0?Q(i+o,0):T(i,o));if(d&&e!=e){for(;s<a;)if((u=c[s++])!=u)return!0}else for(;s<a;s++)if((d||s in c)&&c[s]===e)return d||s||0;return!d&&-1}),z=W[p="IE_PROTO"]||(W[p]="Symbol(".concat(void 0===(h=p)?"":h,")_",(++A+I).toString(36))),F="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),B=Object.keys||function(t){return function(t,e){var n,r=E(t),i=0,o=[];for(n in r)n!=z&&w(r,n)&&o.push(n);for(;e.length>i;)w(r,n=e[i++])&&(~q(o,n)||o.push(n));return o}(t,F)},L={f:Object.getOwnPropertySymbols},R={f:{}.propertyIsEnumerable},G=Object.assign,H=!G||n(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=G({},t)[n]||Object.keys(G({},e)).join("")!=r})?function(t,e){for(var n=Object(k(t)),r=arguments.length,i=1,o=L.f,u=R.f;i<r;)for(var c,a=S(arguments[i++]),s=o?B(a).concat(o(a)):B(a),f=s.length,l=0;l<f;)u.call(a,c=s[l++])&&(n[c]=a[c]);return n}:G;_(_.S+_.F,"Object",{assign:H});var N=y.Object.assign,D=t(e(function(t){t.exports={default:N,__esModule:!0}})),$=t(e(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));_(_.S+_.F*!o,"Object",{defineProperty:f.f});var J=y.Object,K=function(t,e,n){return J.defineProperty(t,e,n)},V=e(function(t){t.exports={default:K,__esModule:!0}});t(V);var X=t(e(function(t,e){e.__esModule=!0;var n,i=(n=V)&&n.__esModule?n:{default:n};e.default=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}()}));var Y=null;function Z(){var e=void 0;return"hidden"in document?"":(["webkit","moz","ms","o"].forEach(function(t){t+"Hidden"in document&&(e=t)}),e||!1)}function tt(){var t=Z();return!1!==t&&document[t?t+"Hidden":"hidden"]}function et(t){window.top.location.href=t}function nt(t){var e=document.createElement("a");e.setAttribute("href",t),e.style.display="none",document.body.appendChild(e),e.click()}function rt(e,t,n){var r,i=!1!==(r=Z())&&r+"visibilitychange",o=!1,u=setTimeout(function(){tt()||(o=!0,t())},n);function c(){var t=tt();o||(o=!1,clearTimeout(u),t&&e())}i?document.addEventListener(i,c):window.addEventListener("pagehide",c)}return function(){function i(t){$(this,i);var e,n,r;this.options=D({timeout:5e3,callback:function(){}},t),this.browser=(e=window.navigator.userAgent||"",n=/android/i.test(e),r=/iphone|ipad|ipod/i.test(e),{isAndroid:n,isIos:r,isWechat:/micromessenger\/([\d.]+)/i.test(e),isWeibo:/(weibo).*weibo__([\d.]+)/i.test(e),isQQ:/qq\/([\d.]+)/i.test(e),isQQBrowser:/(qqbrowser)\/([\d.]+)/i.test(e),isQzone:/qzone\/.*_qz_([\d.]+)/i.test(e),isOriginalChrome:/chrome\/[\d.]+ Mobile Safari\/[\d.]+/i.test(e)&&n,isSafari:/safari\/([\d.]+)$/i.test(e)&&r&&e.indexOf("Crios")<0&&0===e.indexOf("Mozilla")})}return X(i,[{key:"checkOpen",value:function(t,n){var r=this,i=this.browser,o=this.options;return rt(function(){n(t)},function(){var t=r.getScheme(),e=null;e=/^(http|https)/i.test(t)?t:i.isIos?i.isWechat||i.isQQ?o.tencentUrl:o.iOSUrl:i.isWechat||i.isQQ?o.tencentUrl:o.androidUrl,n(e),e&&et(e)},this.options.timeout)}},{key:"getScheme",value:function(){var t=this.options,e=this.browser,n=null;return e.isAndroid&&(n=t.android),e.isIos&&(n=t.iOS),n}},{key:"isCallingApp",value:function(){var t=this.options,e=t.iOS,n=t.android,r=t.iOSUrl,i=t.androidUrl,o=t.tencentUrl;return!!(e&&n&&r&&i&&o)}},{key:"call",value:function(){var t,e=this.browser,n=this.options,r=n.tencentUrl,i=n.logFunc,o=n.callback,u=n.link;if(void 0!==i&&i(),u)o(u,"link"),et(u);else if(this.isCallingApp()){var c=this.getScheme();e.isIos?e.isWechat||e.isQQ?et(c):nt(c):e.isWechat?et(r):e.isOriginalChrome?nt(c):(t=c,Y||((Y=document.createElement("iframe")).frameborder="0",Y.style.cssText="display:none;border:0;width:0;height:0;",document.body.appendChild(Y)),Y.src=t),this.checkOpen(c,o)}return this}}]),i}()});
