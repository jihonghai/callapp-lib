!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).CallApp=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var v=t(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),y=t(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),m=(y.version,function(r,o,e){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(r),void 0===o)return r;switch(e){case 1:return function(e){return r.call(o,e)};case 2:return function(e,t){return r.call(o,e,t)};case 3:return function(e,t,n){return r.call(o,e,t,n)}}return function(){return r.apply(o,arguments)}}),o=function(e){return"object"==typeof e?null!==e:"function"==typeof e},r=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e},n=function(e){try{return!!e()}catch(e){return!0}},i=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),u=v.document,c=o(u)&&o(u.createElement),a=!i&&!n(function(){return 7!=Object.defineProperty((e="div",c?u.createElement(e):{}),"a",{get:function(){return 7}}).a;var e}),f=Object.defineProperty,s={f:i?Object.defineProperty:function(e,t,n){if(r(e),t=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(t,!0),r(n),a)try{return f(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},b=i?function(e,t,n){return s.f(e,t,{enumerable:!((r=1)&r),configurable:!(2&r),writable:!(4&r),value:n});var r}:function(e,t,n){return e[t]=n,e},l={}.hasOwnProperty,g=function(e,t){return l.call(e,t)},w="prototype",O=function(e,t,n){var r,o,i,u=e&O.F,c=e&O.G,a=e&O.S,f=e&O.P,s=e&O.B,l=e&O.W,d=c?y:y[t]||(y[t]={}),p=d[w],h=c?v:a?v[t]:(v[t]||{})[w];for(r in c&&(n=t),n)(o=!u&&h&&void 0!==h[r])&&g(d,r)||(i=o?h[r]:n[r],d[r]=c&&"function"!=typeof h[r]?n[r]:s&&o?m(i,v):l&&h[r]==i?function(r){var e=function(e,t,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,t)}return new r(e,t,n)}return r.apply(this,arguments)};return e[w]=r[w],e}(i):f&&"function"==typeof i?m(Function.call,i):i,f&&((d.virtual||(d.virtual={}))[r]=i,e&O.R&&p&&!p[r]&&b(p,r,i)))};O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128;var d,p,h,_=O,j={}.toString,S=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==(t=e,j.call(t).slice(8,-1))?e.split(""):Object(e);var t},E=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},M=function(e){return S(E(e))},k=Math.ceil,P=Math.floor,x=function(e){return isNaN(e=+e)?0:(0<e?P:k)(e)},T=Math.min,C=Math.max,Q=Math.min,I=t(function(e){var t="__core-js_shared__",n=v[t]||(v[t]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:y.version,mode:"pure",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})}),q=0,z=Math.random(),F=I("keys"),A=(d=!1,function(e,t,n){var r,o,i,u,c=M(e),a=0<(r=c.length)?T(x(r),9007199254740991):0,f=(i=a,(o=x(o=n))<0?C(o+i,0):Q(o,i));if(d&&t!=t){for(;f<a;)if((u=c[f++])!=u)return!0}else for(;f<a;f++)if((d||f in c)&&c[f]===t)return d||f||0;return!d&&-1}),W=F[p="IE_PROTO"]||(F[p]="Symbol(".concat(void 0===(h=p)?"":h,")_",(++q+z).toString(36))),B="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),L=Object.keys||function(e){return function(e,t){var n,r=M(e),o=0,i=[];for(n in r)n!=W&&g(r,n)&&i.push(n);for(;t.length>o;)g(r,n=t[o++])&&(~A(i,n)||i.push(n));return i}(e,B)},R={f:Object.getOwnPropertySymbols},G={f:{}.propertyIsEnumerable},H=Object.assign,N=!H||n(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=H({},e)[n]||Object.keys(H({},t)).join("")!=r})?function(e,t){for(var n=Object(E(e)),r=arguments.length,o=1,i=R.f,u=G.f;o<r;)for(var c,a=S(arguments[o++]),f=i?L(a).concat(i(a)):L(a),s=f.length,l=0;l<s;)u.call(a,c=f[l++])&&(n[c]=a[c]);return n}:H;_(_.S+_.F,"Object",{assign:N});var Y=y.Object.assign,D=e(t(function(e){e.exports={default:Y,__esModule:!0}})),U=e(t(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}));_(_.S+_.F*!i,"Object",{defineProperty:s.f});var V=y.Object,$=function(e,t,n){return V.defineProperty(e,t,n)},J=t(function(e){e.exports={default:$,__esModule:!0}});e(J);var K=e(t(function(e,t){t.__esModule=!0;var n,o=(n=J)&&n.__esModule?n:{default:n};t.default=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}()}));function X(){var e=window.navigator.userAgent||"",t=/android/i.test(e),n=/iphone|ipad|ipod/i.test(e);return{isAndroid:t,isIos:n,isWechat:/micromessenger\/([\d.]+)/i.test(e),isWeibo:/(weibo).*weibo__([\d.]+)/i.test(e),isQQ:/qq\/([\d.]+)/i.test(e),isQQBrowser:/(qqbrowser)\/([\d.]+)/i.test(e),isQzone:/qzone\/.*_qz_([\d.]+)/i.test(e),isOriginalChrome:/chrome\/[\d.]+ Mobile Safari\/[\d.]+/i.test(e)&&t,isSafari:/safari\/([\d.]+)$/i.test(e)&&n&&e.indexOf("Crios")<0&&0===e.indexOf("Mozilla")}}var Z=null;function ee(){var t=void 0;return"hidden"in document?"":(["webkit","moz","ms","o"].forEach(function(e){e+"Hidden"in document&&(t=e)}),t||!1)}function te(e){window.top.location.href=e}function ne(e){Z||((Z=document.createElement("iframe")).frameborder="0",Z.style.cssText="display:none;border:0;width:0;height:0;",document.body.appendChild(Z)),Z.src=e}function re(t,e){var n,r=!1!==(n=ee())&&n+"visibilitychange",o=setTimeout(function(){var e;!1!==(e=ee())&&document[e?e+"Hidden":"hidden"]||t()},e);r?document.addEventListener(r,function(){clearTimeout(o)}):window.addEventListener("pagehide",function(){clearTimeout(o)})}return function(){function t(e){U(this,t);this.options=D({timeout:2e3,callback:function(){}},e)}return K(t,[{key:"checkOpen",value:function(t){var n=this;return re(function(){var e=n.getScheme();/^(http|https)/i.test(e),te(e),t()},this.options.timeout)}},{key:"getScheme",value:function(){var e=this.options,t=X(),n=null;return t.isAndroid&&(n=e.android),t.isIos&&(n=e.iOS),n}},{key:"call",value:function(e){var t,n,r,o=X(),i=this.options,u=i.appstore,c=i.logFunc,a=i.callback,f=this.generateScheme(e);void 0!==c&&c(),o.isIos?o.isWechat||o.isQQ||o.isQQBrowser?te(u):(r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),parseInt(r[1],10)<9&&ne(f)):o.isWechat?te(this.generateYingYongBao(e)):o.isOriginalChrome?"undefined"!=typeof intent||(t=f,(n=document.createElement("a")).setAttribute("href",t),n.style.display="none",document.body.appendChild(n),n.click()):ne(f),this.checkOpen(a)}}]),t}()});
